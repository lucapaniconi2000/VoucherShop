# Troubleshooting

## Swagger shows 401 Unauthorized
- You need to authorize in Swagger with:
  `Bearer <accessToken>`
- Ensure token was generated by the same environment/config.

## "The signature key was not found" / invalid_token
- Mismatch between JWT signing key used to generate token and the one used to validate it.
- Ensure `Jwt:Key` is exactly the same value in both generation and validation.

## IDX10720 HS256 key size too small
- Your JWT key is not 256-bit.
- Generate a new Base64 key representing >= 32 bytes.

## EF: Unable to create DbContext at design time
- Ensure `AppDbContextFactory` exists and uses the same provider (Npgsql).
- Ensure connection string is reachable.

## PostgreSQL UTC DateTime errors
- Npgsql requires UTC when using `timestamp with time zone`.
- Always use `DateTime.UtcNow` for persisted timestamps.

## Docker container unhealthy
- Check logs:
  `docker logs vouchershop-postgres`
- Ensure `POSTGRES_*` env vars match the healthcheck DB name and user.
